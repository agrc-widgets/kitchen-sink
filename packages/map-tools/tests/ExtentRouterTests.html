<!DOCTYPE html>
<html>
<head>
    <title>ExtentRouter Tests</title>
    <link rel="stylesheet" href="../../../node_modules/arcgis-js-api/css/main.css">
    <link rel="stylesheet" href="../resources/MapView.css">
    <style>
        .esri-view {
            height: 500px;
            width: 500px;
        }
    </style>

    <script type="text/javascript" src="../../../common/testing/SetUpTests.js"></script>
    <script type="text/javascript" src="../../../node_modules/dojo/dojo.js"></script>
    <script type="text/javascript">
        require([
            'esri/geometry/Point',
            'esri/Map',
            'esri/views/MapView',

            'map-tools/extentRouter',
            'map-tools/MapView',

            'dojo/domReady!'
        ], function (
            Point,
            Map,
            MapView,

            extentRouter,
            AGRCMapView
        ) {
            const map = new Map({ basemap: 'streets' });

            const mapView = new MapView({
                map,
                container: 'mapDiv'
            });
            new AGRCMapView(mapView);
            extentRouter(mapView);

            mapView.when(() => {
                document.body.className = 'loaded';
            });

            window.getMapViewProps = function () {
                return {
                    center: mapView.center.toJSON(),
                    zoom: mapView.zoom,
                    scale: mapView.scale
                };
            };

            window.zoomTo = function (target, zoom) {
                return mapView.goTo({
                    target: new Point(target),
                    zoom
                }, { animate: false });
            };
        });
    </script>
</head>
<body>
    <div id="mapDiv"></div>
</body>
</html>
